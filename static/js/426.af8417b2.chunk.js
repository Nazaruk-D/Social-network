"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[426],{8316:function(e,t,o){o.d(t,{S:function(){return c}});var s=o(885),n=o(2791),a="AddMessageForm_addMessageFormBlock__uazj8",i="AddMessageForm_textField__ywim1",r="BigButton_button__fyxB0",l=o(184),u=function(e){var t=e.onClick;return(0,l.jsx)("button",{className:r,onClick:t,children:"AddPost"})},c=function(e){var t=(0,n.useState)(""),o=(0,s.Z)(t,2),r=o[0],c=o[1];return(0,l.jsxs)("div",{className:a,children:[(0,l.jsx)("textarea",{className:i,placeholder:"Enter your message",value:r,onChange:function(e){c(e.currentTarget.value)},onKeyDown:function(t){"Enter"===t.key&&(e.onSubmit(r),c(""))}}),(0,l.jsx)(u,{onClick:function(){""!==r&&(e.onSubmit(r),c(""))}})]})}},2465:function(e,t,o){o.r(t),o.d(t,{default:function(){return ke}});var s=o(5671),n=o(3144),a=o(136),i=o(5716),r=o(2791),l="Profile_profileContainer__GK-ND",u="ProfileInfo_profileInfoContainer__9v5Ik",c="ProfileInfo_profileInfoBlock__goYeC",d=(o(5168),o(885)),p="Avatar_avatarBlock__JTVEg",h="Avatar_mainAvatar__KeHeu",f="Avatar_avatar__ZdHc9",m="Avatar_photoBlock__YAGO2",v="Avatar_buttonBlock__35bEO",x="Avatar_updatePhotoButton__vOyV5",j="Avatar_zoomPhotoButton__Itboq",g=o(5861),_=o(7757),k=o.n(_),b={uploadPhotoContainer:"UploadPhoto_uploadPhotoContainer__XCx6B",closeTag:"UploadPhoto_closeTag__4fRqS",cropperContainer:"UploadPhoto_cropperContainer__KVYvq",cropper:"UploadPhoto_cropper__nBYmO",settings:"UploadPhoto_settings__Nf17s",radioButton:"UploadPhoto_radioButton__gPC+J",buttons:"UploadPhoto_buttons__JtBgW",button:"UploadPhoto_button__yKOJb"},P=o(184),C=function(e){var t=e.onImageSelected,o=(0,r.useRef)();return(0,P.jsxs)("div",{className:b.fileInputContainer,children:[(0,P.jsx)("input",{type:"file",accept:"image/*",ref:o,onChange:function(e){if(e.target.files&&e.target.files.length>0){var o=new FileReader;o.readAsDataURL(e.target.files[0]),o.onload=function(e){t(o.result)}}},style:{display:"none"}}),(0,P.jsx)("button",{className:"btn",onClick:function(){o.current.click()},children:"Choose Image"})]})},N=o(7005),y=function(e){var t=e.image,o=e.onCropDone,s=e.onCropCancel,n=(0,r.useState)({x:0,y:0}),a=(0,d.Z)(n,2),i=a[0],l=a[1],u=(0,r.useState)(1),c=(0,d.Z)(u,2),p=c[0],h=c[1],f=(0,r.useState)(null),m=(0,d.Z)(f,2),v=m[0],x=m[1],j=(0,r.useState)(5/4),g=(0,d.Z)(j,2),_=g[0],k=g[1];return(0,P.jsxs)("div",{className:b.cropperContainer,children:[(0,P.jsx)("div",{className:b.cropper,children:(0,P.jsx)(N.ZP,{image:t,aspect:_,crop:i,zoom:p,onCropChange:l,onZoomChange:function(){window.onwheel=function(e){e.deltaY<0?h(p+.2):h(p-.2)}},onCropComplete:function(e,t){x(t)},style:{containerStyle:{width:"100%",height:"80%",backgroundColor:"#fff"}}})}),(0,P.jsxs)("div",{className:b.settings,children:[(0,P.jsxs)("div",{className:b.radioButton,onChange:function(e){k(e.target.value)},children:[(0,P.jsx)("input",{type:"radio",value:1,name:"ratio"})," 1:1",(0,P.jsx)("input",{type:"radio",value:5/4,name:"ratio"})," 5:4",(0,P.jsx)("input",{type:"radio",value:4/3,name:"ratio"})," 4:3",(0,P.jsx)("input",{type:"radio",value:1.5,name:"ratio"})," 3:2",(0,P.jsx)("input",{type:"radio",value:5/3,name:"ratio"})," 5:3",(0,P.jsx)("input",{type:"radio",value:16/9,name:"ratio"})," 16:9",(0,P.jsx)("input",{type:"radio",value:3,name:"ratio"})," 3:1"]}),(0,P.jsxs)("div",{className:b.buttons,children:[(0,P.jsx)("button",{className:b.button,onClick:s,children:"Cancel"}),(0,P.jsx)("button",{className:b.button,onClick:function(){o(v)},children:"Done"})]})]})]})},S=o(8820),Z=function(e){var t=e.savePhoto,o=e.setUploadPhoto,s=(0,r.useState)(""),n=(0,d.Z)(s,2),a=n[0],i=n[1],l=(0,r.useState)("choose-img"),u=(0,d.Z)(l,2),c=u[0],p=u[1],h=(0,r.useState)(""),f=(0,d.Z)(h,2),m=f[0],v=f[1],x=function(){var e=(0,g.Z)(k().mark((function e(s){var n,a,i,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,fetch(s);case 3:return n=e.sent,e.next=6,n.blob();case 6:a=e.sent,(i=new Image).src=s,console.log(i),r=new File([a],"image.jpg",{type:a.type}),console.log(r),t(r),o(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,P.jsxs)("div",{className:b.uploadPhotoContainer,children:[(0,P.jsx)("div",{className:b.closeTag,onClick:function(){return o(!1)},children:(0,P.jsx)(S.LHV,{style:{fontSize:"22px"}})}),"choose-img"===c?(0,P.jsx)(C,{onImageSelected:function(e){i(e),p("crop-img")}}):"crop-img"===c?(0,P.jsx)(y,{image:a,onCropDone:function(e){var o=document.createElement("canvas");o.width=e.width,o.height=e.height;var s=o.getContext("2d"),n=new Image;n.src=a,n.onload=function(){s.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var a=o.toDataURL("image/jpeg");v(a),p("img-cropped"),t(a),x(a)}},onCropCancel:function(){p("choose-img"),i("")}}):(0,P.jsxs)("div",{className:b.bottomBlock,children:[(0,P.jsx)("div",{children:(0,P.jsx)("img",{src:m,className:b.croppedIMG})}),(0,P.jsx)("button",{onClick:function(){p("crop-img")},className:"btn",children:"Crop"}),(0,P.jsx)("button",{onClick:function(){p("choose-img"),i("")},className:"btn",children:"New Image"})]})]})},A="ZoomPhoto_zoomPhotoContainer__xljbr",w="ZoomPhoto_closeIcon__n1T5z",D="ZoomPhoto_zoomPhoto__XMvSl",I=function(e){var t=e.setZoomPhoto,o=e.img;return(0,P.jsxs)("div",{className:A,children:[(0,P.jsxs)("div",{className:w,onClick:function(){return t(!1)},children:[" ",(0,P.jsx)(S.LHV,{style:{fontSize:"22px"}})]}),(0,P.jsx)("img",{src:o,alt:"zoom Photo",className:D})]})},M=o(1335),B=function(e){var t=e.profile,o=e.isOwner,s=e.savePhoto,n=(0,r.useState)(!1),a=(0,d.Z)(n,2),i=a[0],l=a[1],u=(0,r.useState)(!1),c=(0,d.Z)(u,2),g=c[0],_=c[1],k=null!==(null===t||void 0===t?void 0:t.photos.large)?null===t||void 0===t?void 0:t.photos.large:(0,M.s)();return(0,P.jsx)("div",{className:p,children:(0,P.jsxs)("div",{className:h,children:[(0,P.jsx)("img",{id:"photo",src:k,className:f}),o?(0,P.jsx)("div",{className:m,children:(0,P.jsxs)("div",{className:v,children:[(0,P.jsx)("button",{className:x,onClick:function(){return l(!0)},children:" Upload photo"}),(0,P.jsx)("button",{className:j,onClick:function(){return _(!0)},children:" Zoom photo"})]})}):(0,P.jsx)("div",{className:m,children:(0,P.jsx)("div",{className:v,children:(0,P.jsx)("button",{className:j,onClick:function(){return _(!0)},children:" Zoom photo"})})}),i&&(0,P.jsx)(Z,{savePhoto:s,setUploadPhoto:l}),g&&(0,P.jsx)(I,{setZoomPhoto:_,img:k})]})})},F="ProfileDescription_profileBlock__e1dZM",T="ProfileDescription_profileStatus__GN9ZX",J="ProfileDescription_profileDataForm__sdocR",U=o(7425),E=function(e){(0,a.Z)(o,e);var t=(0,i.Z)(o);function o(){var e;(0,s.Z)(this,o);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={editMode:!1,status:e.props.status},e.activateEditeMode=function(){e.setState({editMode:!0})},e.deactivateEditeMode=function(){e.setState({editMode:!1}),e.props.updateStatus(e.state.status)},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e}return(0,n.Z)(o,[{key:"componentDidUpdate",value:function(e,t,o){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return(0,P.jsxs)("div",{children:[!this.state.editMode&&(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{onDoubleClick:this.activateEditeMode,children:this.props.status?this.props.status:"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"}),(0,P.jsx)(U.enh,{style:{fontSize:20,marginLeft:15,position:"absolute"}})]}),this.state.editMode&&(0,P.jsx)("div",{children:(0,P.jsx)("input",{onChange:this.onStatusChange,value:this.state.status,onBlur:this.deactivateEditeMode,autoFocus:!0})})]})}}]),o}(r.Component),O=E,z=o(8683),L=o(4726),V="FormInput_input__RIzzV",R=function(e){var t=e.placeHolder,o=e.value,s=e.onChange;return(0,P.jsx)("input",{className:V,placeholder:t,value:o,onChange:s})},H=function(e){var t=e.profile,o=e.updateProfileData,s=e.setEditMode,n=(0,r.useState)({fullName:t.fullName,lookingForAJob:t.lookingForAJob,lookingForAJobDescription:t.lookingForAJobDescription,aboutMe:t.aboutMe}),a=(0,d.Z)(n,2),i=a[0],l=a[1],u=function(e){l((0,z.Z)((0,z.Z)({},i),{},{lookingForAJob:e}))},c=(0,z.Z)({userId:t.userId,contacts:{github:"",vk:"",facebook:"",instagram:"",twitter:"",website:"",youtube:"",mainLink:""}},i);return(0,P.jsxs)("form",{children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"Full Name"}),": ",(0,P.jsx)(R,{value:i.fullName,onChange:function(e){l((0,z.Z)((0,z.Z)({},i),{},{fullName:e.currentTarget.value}))}})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"Looking for a job"}),":",(0,P.jsxs)("label",{children:[(0,P.jsx)("input",{type:"radio",name:"radio",value:"true",checked:i.lookingForAJob,onChange:function(){return u(!0)}})," yes",(0,P.jsx)("input",{type:"radio",name:"radio",value:"false",checked:!i.lookingForAJob,onChange:function(){return u(!1)}})," no"]})]}),i.lookingForAJob&&(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"My professional skills"}),": ",(0,P.jsx)(R,{value:i.lookingForAJobDescription,onChange:function(e){l((0,z.Z)((0,z.Z)({},i),{},{lookingForAJobDescription:e.currentTarget.value}))}})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"About me"}),": ",(0,P.jsx)(R,{value:i.aboutMe,onChange:function(e){l((0,z.Z)((0,z.Z)({},i),{},{aboutMe:e.currentTarget.value}))}})]}),(0,P.jsx)("div",{}),(0,P.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:[(0,P.jsx)("span",{children:(0,P.jsx)(L.Z,{onClick:function(){o(c,String(t.userId)),s()},nameButton:"save"})}),(0,P.jsx)("span",{style:{marginLeft:"5px"},children:(0,P.jsx)(L.Z,{onClick:function(){return s()},nameButton:"close"})})]})]})},K=function(e){var t=e.profile,o=e.isOwner,s=e.goToEditMode;return(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"Full Name"}),": ",t.fullName]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"Looking for a job"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("b",{children:"About me"}),": ",t.aboutMe]}),(0,P.jsx)("div",{}),o&&(0,P.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:11},children:(0,P.jsx)(L.Z,{onClick:function(){return s()},nameButton:"edit"})})]})},G=function(e){var t=e.profile,o=e.authId,s=e.status,n=e.updateStatus,a=e.isOwner,i=e.updateProfileData,l=(0,r.useState)(!1),u=(0,d.Z)(l,2),c=u[0],p=u[1],h=Number(o);return(0,P.jsxs)("div",{className:F,children:[(0,P.jsxs)("div",{className:T,children:[(0,P.jsx)("div",{children:"Status:"}),t.userId===h?(0,P.jsx)(O,{status:s,updateStatus:n}):(0,P.jsx)("span",{children:s})]}),c?(0,P.jsx)("div",{className:J,children:(0,P.jsx)(H,{profile:t,updateProfileData:i,setEditMode:function(){return p(!1)}})}):(0,P.jsx)("div",{className:J,children:(0,P.jsx)(K,{goToEditMode:function(){return p(!0)},profile:t,isOwner:a})})]})},Y=function(e){var t=e.profile,o=e.isOwner,s=e.savePhoto,n=e.updateProfileData,a=e.updateStatus,i=e.status,r=e.authId;return(0,P.jsx)("div",{className:u,children:(0,P.jsxs)("div",{className:c,children:[(0,P.jsx)(B,{profile:t,isOwner:o,savePhoto:s}),(0,P.jsx)(G,{profile:t,authId:r,status:i,updateStatus:a,isOwner:o,updateProfileData:n})]})})},q="MyPosts_myPostContainer__3vuVZ",W="MyPosts_addForm__CwT0C",X="MyPosts_messageBlock__4JDWJ",Q="MyPosts_item__ydHH-",$="MyPosts_paginationBlock__3AASw",ee="MyPosts_pagination__NnNu+",te="Post_postContainer__jxQ-s",oe="Post_avaBlock__8rQEc",se="Post_ava__wjWVP",ne="Post_textBlock__UkJVG",ae="Post_name__Xr5Bj",ie="Post_message__Qy6Nf",re="Post_like__wVdVD",le=o(6060),ue=function(e){return(0,P.jsxs)("div",{className:te,children:[(0,P.jsx)("div",{className:oe,children:(0,P.jsx)("img",{src:e.img,alt:"avatar",className:se})}),(0,P.jsxs)("div",{className:ne,children:[(0,P.jsx)("div",{className:ae,children:e.name}),(0,P.jsx)("div",{className:ie,children:e.post})]}),(0,P.jsx)("img",{src:le,alt:"likePNG",className:re,onClick:function(){return e.addLike(e.p.id)}}),e.likesCount]})},ce=o(8316),de=r.memo((function(e){for(var t=(0,r.useState)(1),o=(0,d.Z)(t,2),s=o[0],n=o[1],a=e.state.postData,i=e.profile.photos.large,l=Math.ceil(a.length/5),u=[],c=1;c<l+1;c++)u.push(c);var p=function(e){if(1===e)return a.slice(0,5);if(e>1){var t=5*e-5,o=5*e;return a.slice(t,o)}}(s),h=p.map((function(t){return(0,P.jsx)("div",{children:(0,P.jsx)(ue,{img:t.avatar,name:t.name,post:t.message,likesCount:t.likesCount,buttonName:"Like",addLike:e.addLike,p:t,profile:e.profile})},t.id)})),f=u.map((function(e,t){var o=s===e?{color:"rgb(211, 181, 91)"}:{};return(0,P.jsx)("span",{className:ee,style:o,onClick:function(){return n(e)},children:e},t)})),m=i||"https://sun9-55.userapi.com/impf/4OVa92OuK5A2PL1OkHkfDHRK41EaNgTpv860Tw/DVztYSAWFbA.jpg?size=512x512&quality=96&sign=2df645602452340721ae5fcaeffc49ae&type=album";return(0,P.jsxs)("div",{className:q,children:[(0,P.jsx)("div",{className:W,children:(0,P.jsx)(ce.S,{onSubmit:function(t){e.addPost(t,m)}})}),(0,P.jsx)("div",{className:X,children:(0,P.jsx)("div",{className:Q,children:h})}),(0,P.jsx)("div",{className:$,children:f.length>1&&f})]})})),pe=o(8687),he=o(4136),fe=(0,pe.$j)((function(e){return{state:e.profile,profile:e.profile.profile}}),(function(e){return{addPost:function(t,o){e((0,he.Pi)(t,o))},addLike:function(t){e((0,he.dE)(t))}}}))(de),me=o(2426),ve=function(e){return e.profile?(0,P.jsxs)("div",{className:l,children:[(0,P.jsx)(Y,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto,authId:e.authId,updateProfileData:e.updateProfileData}),(0,P.jsx)(fe,{})]}):(0,P.jsx)(me.p,{})},xe=o(9271),je=o(2932),ge=o(7781),_e=function(e){(0,a.Z)(o,e);var t=(0,i.Z)(o);function o(){return(0,s.Z)(this,o),t.apply(this,arguments)}return(0,n.Z)(o,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.setUserProfileThunk(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,o){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,P.jsx)(ve,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,authId:this.props.authId,updateProfileData:this.props.updateProfileDataThunk})}}]),o}(r.Component),ke=(0,ge.qC)((0,pe.$j)((function(e){return{profile:e.profile.profile,status:e.profile.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth,authId:e.auth.id}}),{setUserProfileThunk:he.TE,getStatus:he.lR,updateStatus:he.Nf,savePhoto:he.Ju,updateProfileDataThunk:he.mv}),xe.EN,je.D)(_e)},2932:function(e,t,o){o.d(t,{D:function(){return d}});var s=o(8683),n=o(5987),a=(o(2791),o(9271)),i=o(8687),r=o(2022),l=o(184),u=["isAuth"],c=function(e){return{isAuth:e.auth.isAuth}};function d(e){return(0,i.$j)(c,{getAuthUserData:r.RK,logout:r.kS})((function(t){var o=t.isAuth,i=(0,n.Z)(t,u);return o?(0,l.jsx)(e,(0,s.Z)({},i)):(0,l.jsx)(a.l_,{to:"/login"})}))}},6060:function(e,t,o){e.exports=o.p+"static/media/like.3bd2642bff63c07e1428.png"}}]);
//# sourceMappingURL=426.af8417b2.chunk.js.map