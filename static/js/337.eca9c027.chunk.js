"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[337],{6091:function(e,t,s){s.r(t),s.d(t,{default:function(){return je}});var o=s(5671),n=s(3144),i=s(136),a=s(5716),r=s(2791),l="Profile_profileContainer__GK-ND",c=s(885),u=s(5987),d="ProfileInfo_profileInfoContainer__9v5Ik",p="ProfileInfo_profileInfoBlock__goYeC",h="ProfileInfo_avatarBlock__21pru",f="ProfileInfo_mainAvatar__jA7Gf",m="ProfileInfo_avatar__KQ0zh",v="ProfileInfo_updatePhoto__ASuP0",_="ProfileInfo_updatePhotoButton__r62FH",x="ProfileInfo_profileBlock__5piPY",j="ProfileInfo_profileStatus__jnFRU",g="ProfileInfo_profileDataForm__O8l5p",P="ProfileInfo_buttonEditProfile__2LsHa",k=s(184),C=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){var e;(0,o.Z)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={editMode:!1,status:e.props.status},e.activateEditeMode=function(){e.setState({editMode:!0})},e.deactivateEditeMode=function(){e.setState({editMode:!1}),e.props.updateStatus(e.state.status)},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e}return(0,n.Z)(s,[{key:"componentDidUpdate",value:function(e,t,s){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return(0,k.jsxs)("div",{children:[!this.state.editMode&&(0,k.jsx)("div",{children:(0,k.jsx)("span",{onDoubleClick:this.activateEditeMode,children:this.props.status?this.props.status:"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"})}),this.state.editMode&&(0,k.jsx)("div",{children:(0,k.jsx)("input",{onChange:this.onStatusChange,value:this.state.status,onBlur:this.deactivateEditeMode,autoFocus:!0})})]})}}]),s}(r.Component),N=C,b=s(2994),y=function(e){var t=e.profile;return(0,k.jsxs)("form",{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("b",{children:"Full Name"}),": ",(0,b.Gr)("Full name","fullname",[],b.II)]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("b",{children:"Looking for a job"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,k.jsxs)("div",{children:[(0,k.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("b",{children:"About me"}),": ",t.aboutMe]}),(0,k.jsx)("div",{}),(0,k.jsx)("button",{onClick:function(){},children:"save"})]})},w=s(1335),S=(s(5168),s(5861)),I=s(7757),M=s.n(I),Z={uploadPhotoContainer:"UploadPhoto_uploadPhotoContainer__I1+lI",closeTag:"UploadPhoto_closeTag__pfnpE",cropperContainer:"UploadPhoto_cropperContainer__XwKCl",cropper:"UploadPhoto_cropper__19sTC",settings:"UploadPhoto_settings__UgolO",radioButton:"UploadPhoto_radioButton__9bxUv",buttons:"UploadPhoto_buttons__KxXwU",button:"UploadPhoto_button__OU0yZ"},U=function(e){var t=e.onImageSelected,s=(0,r.useRef)();return(0,k.jsxs)("div",{className:Z.fileInputContainer,children:[(0,k.jsx)("input",{type:"file",accept:"image/*",ref:s,onChange:function(e){if(e.target.files&&e.target.files.length>0){var s=new FileReader;s.readAsDataURL(e.target.files[0]),s.onload=function(e){t(s.result)}}},style:{display:"none"}}),(0,k.jsx)("button",{className:"btn",onClick:function(){s.current.click()},children:"Choose Image"})]})},A=s(7005),D=function(e){var t=e.image,s=e.onCropDone,o=e.onCropCancel,n=(0,r.useState)({x:0,y:0}),i=(0,c.Z)(n,2),a=i[0],l=i[1],u=(0,r.useState)(1),d=(0,c.Z)(u,2),p=d[0],h=d[1],f=(0,r.useState)(null),m=(0,c.Z)(f,2),v=m[0],_=m[1],x=(0,r.useState)(5/4),j=(0,c.Z)(x,2),g=j[0],P=j[1];return(0,k.jsxs)("div",{className:Z.cropperContainer,children:[(0,k.jsx)("div",{className:Z.cropper,children:(0,k.jsx)(A.ZP,{image:t,aspect:g,crop:a,zoom:p,onCropChange:l,onZoomChange:function(){window.onwheel=function(e){e.deltaY<0?h(p+.2):h(p-.2)}},onCropComplete:function(e,t){_(t)},style:{containerStyle:{width:"100%",height:"80%",backgroundColor:"#fff"}}})}),(0,k.jsxs)("div",{className:Z.settings,children:[(0,k.jsxs)("div",{className:Z.radioButton,onChange:function(e){P(e.target.value)},children:[(0,k.jsx)("input",{type:"radio",value:1,name:"ratio"})," 1:1",(0,k.jsx)("input",{type:"radio",value:5/4,name:"ratio"})," 5:4",(0,k.jsx)("input",{type:"radio",value:4/3,name:"ratio"})," 4:3",(0,k.jsx)("input",{type:"radio",value:1.5,name:"ratio"})," 3:2",(0,k.jsx)("input",{type:"radio",value:5/3,name:"ratio"})," 5:3",(0,k.jsx)("input",{type:"radio",value:16/9,name:"ratio"})," 16:9",(0,k.jsx)("input",{type:"radio",value:3,name:"ratio"})," 3:1"]}),(0,k.jsxs)("div",{className:Z.buttons,children:[(0,k.jsx)("button",{className:Z.button,onClick:o,children:"Cancel"}),(0,k.jsx)("button",{className:Z.button,onClick:function(){s(v)},children:"Done"})]})]})]})},B=function(e){var t=e.savePhoto,s=e.setUploadPhoto,o=(0,r.useState)(""),n=(0,c.Z)(o,2),i=n[0],a=n[1],l=(0,r.useState)("choose-img"),u=(0,c.Z)(l,2),d=u[0],p=u[1],h=(0,r.useState)(""),f=(0,c.Z)(h,2),m=f[0],v=f[1],_=function(){var e=(0,S.Z)(M().mark((function e(o){var n,i,a,r;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,fetch(o);case 3:return n=e.sent,e.next=6,n.blob();case 6:i=e.sent,(a=new Image).src=o,console.log(a),r=new File([i],"image.jpg",{type:i.type}),console.log(r),t(r),s(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,k.jsxs)("div",{className:Z.uploadPhotoContainer,children:[(0,k.jsx)("div",{className:Z.closeTag,onClick:function(){return s(!1)},children:"X"}),"choose-img"===d?(0,k.jsx)(U,{onImageSelected:function(e){a(e),p("crop-img")}}):"crop-img"===d?(0,k.jsx)(D,{image:i,onCropDone:function(e){var s=document.createElement("canvas");s.width=e.width,s.height=e.height;var o=s.getContext("2d"),n=new Image;n.src=i,n.onload=function(){o.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var i=s.toDataURL("image/jpeg");v(i),p("img-cropped"),t(i),_(i)}},onCropCancel:function(){p("choose-img"),a("")}}):(0,k.jsxs)("div",{className:Z.bottomBlock,children:[(0,k.jsx)("div",{children:(0,k.jsx)("img",{src:m,className:Z.croppedIMG})}),(0,k.jsx)("button",{onClick:function(){p("crop-img")},className:"btn",children:"Crop"}),(0,k.jsx)("button",{onClick:function(){p("choose-img"),a("")},className:"btn",children:"New Image"})]})]})},F=["profile","isOwner","savePhoto"],E=function(e){var t=e.profile,s=e.isOwner,o=e.savePhoto,n=(0,u.Z)(e,F),i=(0,r.useState)(!1),a=(0,c.Z)(i,2),l=a[0],P=a[1],C=(0,r.useState)(!1),b=(0,c.Z)(C,2),S=b[0],I=b[1];return(0,k.jsx)("div",{className:d,children:(0,k.jsxs)("div",{className:p,children:[(0,k.jsx)("div",{className:h,children:(0,k.jsxs)("div",{className:f,children:[(0,k.jsx)("img",{src:null!==(null===t||void 0===t?void 0:t.photos.large)?null===t||void 0===t?void 0:t.photos.large:(0,w.s)(),className:m}),(0,k.jsx)("div",{className:v,children:(0,k.jsx)("button",{className:_,onClick:function(){return I(!0)},children:" Upload photo"})}),S&&(0,k.jsx)(B,{savePhoto:o,setUploadPhoto:I})]})}),(0,k.jsxs)("div",{className:x,children:[(0,k.jsxs)("div",{className:j,children:[(0,k.jsx)("div",{children:"Status:"}),(0,k.jsx)(N,{status:n.status,updateStatus:n.updateStatus})]}),l?(0,k.jsx)("div",{className:g,children:(0,k.jsx)(y,{profile:t})}):(0,k.jsx)("div",{className:g,children:(0,k.jsx)(T,{goToEditMode:function(){return P(!0)},profile:t,isOwner:s})})]})]})})},T=function(e){var t=e.profile,s=e.isOwner,o=e.goToEditMode;return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("b",{children:"Full Name"}),": ",t.fullName]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("b",{children:"Looking for a job"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,k.jsxs)("div",{children:[(0,k.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("b",{children:"About me"}),": ",t.aboutMe]}),(0,k.jsx)("div",{}),s&&(0,k.jsx)("button",{onClick:o,className:P,children:"edit"})]})},L="MyPosts_myPostContainer__3vuVZ",J="MyPosts_addForm__CwT0C",O="MyPosts_formContainer__Vqz3M",K="MyPosts_textArea__M7vK7",R="MyPosts_addPostButton__Lcz4a",z="MyPosts_messageBlock__4JDWJ",G="MyPosts_item__ydHH-",V="MyPosts_paginationBlock__3AASw",H="MyPosts_pagination__NnNu+",Q="Post_postContainer__jxQ-s",X="Post_avaBlock__8rQEc",Y="Post_ava__wjWVP",$="Post_textBlock__UkJVG",q="Post_name__Xr5Bj",W="Post_message__Qy6Nf",ee="Post_like__wVdVD",te=s(6060),se=function(e){return(0,k.jsxs)("div",{className:Q,children:[(0,k.jsx)("div",{className:X,children:(0,k.jsx)("img",{src:e.img,alt:"avatar",className:Y})}),(0,k.jsxs)("div",{className:$,children:[(0,k.jsx)("div",{className:q,children:e.name}),(0,k.jsx)("div",{className:W,children:e.post})]}),(0,k.jsx)("img",{src:te,alt:"likePNG",className:ee,onClick:function(){return e.addLike(e.p.id)}})," ",e.likesCount]})},oe=s(4136),ne=s(6139),ie=s(704),ae=s(5304),re=s(4415),le=r.memo((function(e){for(var t=(0,r.useState)(1),s=(0,c.Z)(t,2),o=s[0],n=s[1],i=e.state.postData,a=Math.ceil(i.length/5),l=[],u=1;u<a+1;u++)l.push(u);var d=function(e){if(1===e)return i.slice(0,5);if(e>1){var t=5*e-5,s=5*e;return i.slice(t,s)}}(o),p=d.map((function(t){return(0,k.jsx)("div",{children:(0,k.jsx)(se,{img:t.avatar,name:t.name,post:t.message,likesCount:t.likesCount,buttonName:"Like",addLike:e.addLike,p:t})},t.id)})),h=l.map((function(e,t){var s=o===e?{color:"rgb(211, 181, 91)"}:{};return(0,k.jsx)("span",{className:H,style:s,onClick:function(){return n(e)},children:e},t)}));return(0,k.jsxs)("div",{className:L,children:[(0,k.jsx)("div",{className:J,children:(0,k.jsx)(ue,{onSubmit:function(t){e.addPost(t.newMessageBody)}})}),(0,k.jsx)("div",{className:z,children:(0,k.jsx)("div",{className:G,children:p})}),(0,k.jsx)("div",{className:V,children:h.length>1&&h})]})})),ce=(0,ae.D)(10),ue=(0,ie.Z)({form:"profileAddMessageForm"})((function(e){var t=(0,re.TL)();return(0,k.jsxs)("form",{onSubmit:e.handleSubmit,className:O,children:[(0,k.jsx)(ne.Z,{component:b.Kx,name:"newMessageBody",placeholder:"Enter your message",className:K,validate:[ae.C,ce],onKeyDown:function(e){13===e.keyCode&&t((0,oe.Pi)(e.currentTarget.value))}}),(0,k.jsx)("button",{className:R,children:"AddPost"})]})})),de=s(8687),pe=(0,de.$j)((function(e){return{state:e.profile}}),(function(e){return{addPost:function(t){e((0,oe.Pi)(t))},addLike:function(t){e((0,oe.dE)(t))}}}))(le),he=s(4667),fe=function(e){return e.profile?(0,k.jsxs)("div",{className:l,children:[(0,k.jsx)(E,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto}),(0,k.jsx)(pe,{})]}):(0,k.jsx)(he.p,{})},me=s(9271),ve=s(2932),_e=s(7781),xe=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,o.Z)(this,s),t.apply(this,arguments)}return(0,n.Z)(s,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.setUserProfileThunk(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,s){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,k.jsx)(fe,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto})}}]),s}(r.Component),je=(0,_e.qC)((0,de.$j)((function(e){return{profile:e.profile.profile,status:e.profile.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth}}),{setUserProfileThunk:oe.TE,getStatus:oe.lR,updateStatus:oe.Nf,savePhoto:oe.Ju}),me.EN,ve.D)(xe)},2932:function(e,t,s){s.d(t,{D:function(){return d}});var o=s(8683),n=s(5987),i=(s(2791),s(9271)),a=s(8687),r=s(2717),l=s(184),c=["isAuth"],u=function(e){return{isAuth:e.auth.isAuth}};function d(e){return(0,a.$j)(u,{getAuthUserData:r.RK,logout:r.kS})((function(t){var s=t.isAuth,a=(0,n.Z)(t,c);return s?(0,l.jsx)(e,(0,o.Z)({},a)):(0,l.jsx)(i.l_,{to:"/login"})}))}},6060:function(e,t,s){e.exports=s.p+"static/media/like.3bd2642bff63c07e1428.png"}}]);
//# sourceMappingURL=337.eca9c027.chunk.js.map