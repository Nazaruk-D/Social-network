"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[434],{6880:function(e,t,o){o.r(t),o.d(t,{default:function(){return _e}});var s=o(5671),n=o(3144),i=o(136),a=o(5716),r=o(2791),l="Profile_profileContainer__GK-ND",c=o(885),u=o(5987),d="ProfileInfo_profileInfoContainer__9v5Ik",h="ProfileInfo_profileInfoBlock__goYeC",p="ProfileInfo_avatarBlock__21pru",f="ProfileInfo_mainAvatar__jA7Gf",m="ProfileInfo_avatar__KQ0zh",v="ProfileInfo_photoBlock__Fnyh3",x="ProfileInfo_buttonBlock__YEkP3",_="ProfileInfo_updatePhotoButton__r62FH",j="ProfileInfo_zoomPhotoButton__pxafQ",g="ProfileInfo_profileBlock__5piPY",P="ProfileInfo_profileStatus__jnFRU",k="ProfileInfo_profileDataForm__O8l5p",C=o(184),N=function(e){(0,i.Z)(o,e);var t=(0,a.Z)(o);function o(){var e;(0,s.Z)(this,o);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={editMode:!1,status:e.props.status},e.activateEditeMode=function(){e.setState({editMode:!0})},e.deactivateEditeMode=function(){e.setState({editMode:!1}),e.props.updateStatus(e.state.status)},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e}return(0,n.Z)(o,[{key:"componentDidUpdate",value:function(e,t,o){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return(0,C.jsxs)("div",{children:[!this.state.editMode&&(0,C.jsx)("div",{children:(0,C.jsx)("span",{onDoubleClick:this.activateEditeMode,children:this.props.status?this.props.status:"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"})}),this.state.editMode&&(0,C.jsx)("div",{children:(0,C.jsx)("input",{onChange:this.onStatusChange,value:this.state.status,onBlur:this.deactivateEditeMode,autoFocus:!0})})]})}}]),o}(r.Component),b=N,y=o(2994),S=function(e){var t=e.profile;return(0,C.jsxs)("form",{children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"Full Name"}),": ",(0,y.Gr)("Full name","fullname",[],y.II)]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"Looking for a job"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"About me"}),": ",t.aboutMe]}),(0,C.jsx)("div",{}),(0,C.jsx)("button",{onClick:function(){},children:"save"})]})},I=o(1335),Z=(o(5168),o(5861)),w=o(7757),M=o.n(w),A={uploadPhotoContainer:"UploadPhoto_uploadPhotoContainer__I1+lI",closeTag:"UploadPhoto_closeTag__pfnpE",cropperContainer:"UploadPhoto_cropperContainer__XwKCl",cropper:"UploadPhoto_cropper__19sTC",settings:"UploadPhoto_settings__UgolO",radioButton:"UploadPhoto_radioButton__9bxUv",buttons:"UploadPhoto_buttons__KxXwU",button:"UploadPhoto_button__OU0yZ"},U=function(e){var t=e.onImageSelected,o=(0,r.useRef)();return(0,C.jsxs)("div",{className:A.fileInputContainer,children:[(0,C.jsx)("input",{type:"file",accept:"image/*",ref:o,onChange:function(e){if(e.target.files&&e.target.files.length>0){var o=new FileReader;o.readAsDataURL(e.target.files[0]),o.onload=function(e){t(o.result)}}},style:{display:"none"}}),(0,C.jsx)("button",{className:"btn",onClick:function(){o.current.click()},children:"Choose Image"})]})},D=o(7005),F=function(e){var t=e.image,o=e.onCropDone,s=e.onCropCancel,n=(0,r.useState)({x:0,y:0}),i=(0,c.Z)(n,2),a=i[0],l=i[1],u=(0,r.useState)(1),d=(0,c.Z)(u,2),h=d[0],p=d[1],f=(0,r.useState)(null),m=(0,c.Z)(f,2),v=m[0],x=m[1],_=(0,r.useState)(5/4),j=(0,c.Z)(_,2),g=j[0],P=j[1];return(0,C.jsxs)("div",{className:A.cropperContainer,children:[(0,C.jsx)("div",{className:A.cropper,children:(0,C.jsx)(D.ZP,{image:t,aspect:g,crop:a,zoom:h,onCropChange:l,onZoomChange:function(){window.onwheel=function(e){e.deltaY<0?p(h+.2):p(h-.2)}},onCropComplete:function(e,t){x(t)},style:{containerStyle:{width:"100%",height:"80%",backgroundColor:"#fff"}}})}),(0,C.jsxs)("div",{className:A.settings,children:[(0,C.jsxs)("div",{className:A.radioButton,onChange:function(e){P(e.target.value)},children:[(0,C.jsx)("input",{type:"radio",value:1,name:"ratio"})," 1:1",(0,C.jsx)("input",{type:"radio",value:5/4,name:"ratio"})," 5:4",(0,C.jsx)("input",{type:"radio",value:4/3,name:"ratio"})," 4:3",(0,C.jsx)("input",{type:"radio",value:1.5,name:"ratio"})," 3:2",(0,C.jsx)("input",{type:"radio",value:5/3,name:"ratio"})," 5:3",(0,C.jsx)("input",{type:"radio",value:16/9,name:"ratio"})," 16:9",(0,C.jsx)("input",{type:"radio",value:3,name:"ratio"})," 3:1"]}),(0,C.jsxs)("div",{className:A.buttons,children:[(0,C.jsx)("button",{className:A.button,onClick:s,children:"Cancel"}),(0,C.jsx)("button",{className:A.button,onClick:function(){o(v)},children:"Done"})]})]})]})},B=o(8820),E=function(e){var t=e.savePhoto,o=e.setUploadPhoto,s=(0,r.useState)(""),n=(0,c.Z)(s,2),i=n[0],a=n[1],l=(0,r.useState)("choose-img"),u=(0,c.Z)(l,2),d=u[0],h=u[1],p=(0,r.useState)(""),f=(0,c.Z)(p,2),m=f[0],v=f[1],x=function(){var e=(0,Z.Z)(M().mark((function e(s){var n,i,a,r;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,fetch(s);case 3:return n=e.sent,e.next=6,n.blob();case 6:i=e.sent,(a=new Image).src=s,console.log(a),r=new File([i],"image.jpg",{type:i.type}),console.log(r),t(r),o(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,C.jsxs)("div",{className:A.uploadPhotoContainer,children:[(0,C.jsx)("div",{className:A.closeTag,onClick:function(){return o(!1)},children:(0,C.jsx)(B.LHV,{style:{fontSize:"22px"}})}),"choose-img"===d?(0,C.jsx)(U,{onImageSelected:function(e){a(e),h("crop-img")}}):"crop-img"===d?(0,C.jsx)(F,{image:i,onCropDone:function(e){var o=document.createElement("canvas");o.width=e.width,o.height=e.height;var s=o.getContext("2d"),n=new Image;n.src=i,n.onload=function(){s.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var i=o.toDataURL("image/jpeg");v(i),h("img-cropped"),t(i),x(i)}},onCropCancel:function(){h("choose-img"),a("")}}):(0,C.jsxs)("div",{className:A.bottomBlock,children:[(0,C.jsx)("div",{children:(0,C.jsx)("img",{src:m,className:A.croppedIMG})}),(0,C.jsx)("button",{onClick:function(){h("crop-img")},className:"btn",children:"Crop"}),(0,C.jsx)("button",{onClick:function(){h("choose-img"),a("")},className:"btn",children:"New Image"})]})]})},T="ZoomPhoto_zoomPhotoContainer__3qQ8I",O="ZoomPhoto_closeIcon__m9jVV",z="ZoomPhoto_zoomPhoto__D-1D+",L=function(e){var t=e.setZoomPhoto,o=e.img;return(0,C.jsxs)("div",{className:T,children:[(0,C.jsxs)("div",{className:O,onClick:function(){return t(!1)},children:[" ",(0,C.jsx)(B.LHV,{style:{fontSize:"22px"}})]}),(0,C.jsx)("img",{src:o,alt:"zoom Photo",className:z})]})},V=o(7707),J=["profile","isOwner","savePhoto"],R=function(e){var t=e.profile,o=e.isOwner,s=e.savePhoto,n=(0,u.Z)(e,J),i=(0,r.useState)(!1),a=(0,c.Z)(i,2),l=a[0],N=a[1],y=(0,r.useState)(!1),Z=(0,c.Z)(y,2),w=Z[0],M=Z[1],A=(0,r.useState)(!1),U=(0,c.Z)(A,2),D=U[0],F=U[1],B=null!==(null===t||void 0===t?void 0:t.photos.large)?null===t||void 0===t?void 0:t.photos.large:(0,I.s)();return(0,C.jsx)("div",{className:d,children:(0,C.jsxs)("div",{className:h,children:[(0,C.jsx)("div",{className:p,children:(0,C.jsxs)("div",{className:f,children:[(0,C.jsx)("img",{id:"photo",src:B,className:m}),o?(0,C.jsx)("div",{className:v,children:(0,C.jsxs)("div",{className:x,children:[(0,C.jsx)("button",{className:_,onClick:function(){return M(!0)},children:" Upload photo"}),(0,C.jsx)("button",{className:j,onClick:function(){return F(!0)},children:" Zoom photo"})]})}):(0,C.jsx)("div",{className:v,children:(0,C.jsx)("div",{className:x,children:(0,C.jsx)("button",{className:j,onClick:function(){return F(!0)},children:" Zoom photo"})})}),w&&(0,C.jsx)(E,{savePhoto:s,setUploadPhoto:M}),D&&(0,C.jsx)(L,{setZoomPhoto:F,img:B})]})}),(0,C.jsxs)("div",{className:g,children:[(0,C.jsxs)("div",{className:P,children:[(0,C.jsx)("div",{children:"Status:"}),(0,C.jsx)(b,{status:n.status,updateStatus:n.updateStatus})]}),l?(0,C.jsx)("div",{className:k,children:(0,C.jsx)(S,{profile:t})}):(0,C.jsx)("div",{className:k,children:(0,C.jsx)(G,{goToEditMode:function(){return N(!0)},profile:t,isOwner:o})})]})]})})},G=function(e){var t=e.profile,o=e.isOwner,s=e.goToEditMode;return(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"Full Name"}),": ",t.fullName]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"Looking for a job"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"About me"}),": ",t.aboutMe]}),(0,C.jsx)("div",{}),o&&(0,C.jsx)(V.Z,{onClick:function(){return s()},nameButton:"edit"})]})},H="MyPosts_myPostContainer__3vuVZ",K="MyPosts_addForm__CwT0C",Q="MyPosts_messageBlock__4JDWJ",Y="MyPosts_item__ydHH-",q="MyPosts_paginationBlock__3AASw",X="MyPosts_pagination__NnNu+",W="Post_postContainer__jxQ-s",$="Post_avaBlock__8rQEc",ee="Post_ava__wjWVP",te="Post_textBlock__UkJVG",oe="Post_name__Xr5Bj",se="Post_message__Qy6Nf",ne="Post_like__wVdVD",ie=o(6060),ae=function(e){return(0,C.jsxs)("div",{className:W,children:[(0,C.jsx)("div",{className:$,children:(0,C.jsx)("img",{src:e.img,alt:"avatar",className:ee})}),(0,C.jsxs)("div",{className:te,children:[(0,C.jsx)("div",{className:oe,children:e.name}),(0,C.jsx)("div",{className:se,children:e.post})]}),(0,C.jsx)("img",{src:ie,alt:"likePNG",className:ne,onClick:function(){return e.addLike(e.p.id)}}),e.likesCount]})},re=o(1957),le=r.memo((function(e){for(var t=(0,r.useState)(1),o=(0,c.Z)(t,2),s=o[0],n=o[1],i=e.state.postData,a=e.profile.photos.large,l=Math.ceil(i.length/5),u=[],d=1;d<l+1;d++)u.push(d);var h=function(e){if(1===e)return i.slice(0,5);if(e>1){var t=5*e-5,o=5*e;return i.slice(t,o)}}(s),p=h.map((function(t){return(0,C.jsx)("div",{children:(0,C.jsx)(ae,{img:t.avatar,name:t.name,post:t.message,likesCount:t.likesCount,buttonName:"Like",addLike:e.addLike,p:t,profile:e.profile})},t.id)})),f=u.map((function(e,t){var o=s===e?{color:"rgb(211, 181, 91)"}:{};return(0,C.jsx)("span",{className:X,style:o,onClick:function(){return n(e)},children:e},t)})),m=a||"https://sun9-55.userapi.com/impf/4OVa92OuK5A2PL1OkHkfDHRK41EaNgTpv860Tw/DVztYSAWFbA.jpg?size=512x512&quality=96&sign=2df645602452340721ae5fcaeffc49ae&type=album";return(0,C.jsxs)("div",{className:H,children:[(0,C.jsx)("div",{className:K,children:(0,C.jsx)(re.S,{onSubmit:function(t){e.addPost(t,m)}})}),(0,C.jsx)("div",{className:Q,children:(0,C.jsx)("div",{className:Y,children:p})}),(0,C.jsx)("div",{className:q,children:f.length>1&&f})]})})),ce=o(8687),ue=o(4136),de=(0,ce.$j)((function(e){return{state:e.profile,profile:e.profile.profile}}),(function(e){return{addPost:function(t,o){e((0,ue.Pi)(t,o))},addLike:function(t){e((0,ue.dE)(t))}}}))(le),he=o(4667),pe=function(e){return e.profile?(0,C.jsxs)("div",{className:l,children:[(0,C.jsx)(R,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto}),(0,C.jsx)(de,{})]}):(0,C.jsx)(he.p,{})},fe=o(9271),me=o(2932),ve=o(7781),xe=function(e){(0,i.Z)(o,e);var t=(0,a.Z)(o);function o(){return(0,s.Z)(this,o),t.apply(this,arguments)}return(0,n.Z)(o,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.setUserProfileThunk(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,o){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,C.jsx)(pe,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto})}}]),o}(r.Component),_e=(0,ve.qC)((0,ce.$j)((function(e){return{profile:e.profile.profile,status:e.profile.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth}}),{setUserProfileThunk:ue.TE,getStatus:ue.lR,updateStatus:ue.Nf,savePhoto:ue.Ju}),fe.EN,me.D)(xe)},1957:function(e,t,o){o.d(t,{S:function(){return u}});var s=o(885),n=o(2791),i="AddMessageForm_addMessageFormBlock__6flMP",a="AddMessageForm_textField__D9IqF",r="BigButton_button__G3XYN",l=o(184),c=function(e){var t=e.onClick;return(0,l.jsx)("button",{className:r,onClick:t,children:"AddPost"})},u=function(e){var t=(0,n.useState)(""),o=(0,s.Z)(t,2),r=o[0],u=o[1];return(0,l.jsxs)("div",{className:i,children:[(0,l.jsx)("textarea",{className:a,placeholder:"Enter your message",value:r,onChange:function(e){u(e.currentTarget.value)}}),(0,l.jsx)(c,{onClick:function(){""!==r&&e.onSubmit(r),u("")}})]})}},2932:function(e,t,o){o.d(t,{D:function(){return d}});var s=o(8683),n=o(5987),i=(o(2791),o(9271)),a=o(8687),r=o(2717),l=o(184),c=["isAuth"],u=function(e){return{isAuth:e.auth.isAuth}};function d(e){return(0,a.$j)(u,{getAuthUserData:r.RK,logout:r.kS})((function(t){var o=t.isAuth,a=(0,n.Z)(t,c);return o?(0,l.jsx)(e,(0,s.Z)({},a)):(0,l.jsx)(i.l_,{to:"/login"})}))}},6060:function(e,t,o){e.exports=o.p+"static/media/like.3bd2642bff63c07e1428.png"}}]);
//# sourceMappingURL=434.c549f94a.chunk.js.map