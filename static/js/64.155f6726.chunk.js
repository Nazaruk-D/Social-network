"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[64],{7386:function(e,t,o){o.r(t),o.d(t,{default:function(){return ke}});var n=o(5671),s=o(3144),i=o(136),a=o(5716),r=o(2791),l="Profile_profileContainer__GK-ND",u=o(885),c=o(5987),d="ProfileInfo_profileInfoContainer__9v5Ik",p="ProfileInfo_profileInfoBlock__goYeC",h="ProfileInfo_avatarBlock__21pru",f="ProfileInfo_mainAvatar__jA7Gf",m="ProfileInfo_avatar__KQ0zh",v="ProfileInfo_photoBlock__Fnyh3",x="ProfileInfo_buttonBlock__YEkP3",j="ProfileInfo_updatePhotoButton__r62FH",_="ProfileInfo_zoomPhotoButton__pxafQ",g="ProfileInfo_profileBlock__5piPY",k="ProfileInfo_profileStatus__jnFRU",P="ProfileInfo_profileDataForm__O8l5p",b=o(7425),C=o(184),N=function(e){(0,i.Z)(o,e);var t=(0,a.Z)(o);function o(){var e;(0,n.Z)(this,o);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={editMode:!1,status:e.props.status},e.activateEditeMode=function(){e.setState({editMode:!0})},e.deactivateEditeMode=function(){e.setState({editMode:!1}),e.props.updateStatus(e.state.status)},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e}return(0,s.Z)(o,[{key:"componentDidUpdate",value:function(e,t,o){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return(0,C.jsxs)("div",{children:[!this.state.editMode&&(0,C.jsxs)("div",{children:[(0,C.jsx)("span",{onDoubleClick:this.activateEditeMode,children:this.props.status?this.props.status:"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"}),(0,C.jsx)(b.enh,{style:{fontSize:20,marginLeft:15,position:"absolute"}})]}),this.state.editMode&&(0,C.jsx)("div",{children:(0,C.jsx)("input",{onChange:this.onStatusChange,value:this.state.status,onBlur:this.deactivateEditeMode,autoFocus:!0})})]})}}]),o}(r.Component),y=N,Z=o(8683),I=o(7707),S="FormInput_input__JFMqH",w=function(e){var t=e.placeHolder,o=e.value,n=e.onChange;return(0,C.jsx)("input",{className:S,placeholder:t,value:o,onChange:n})},D=function(e){var t=e.profile,o=e.updateProfileData,n=e.setEditMode,s=(0,r.useState)({fullName:t.fullName,lookingForAJob:t.lookingForAJob,lookingForAJobDescription:t.lookingForAJobDescription,aboutMe:t.aboutMe}),i=(0,u.Z)(s,2),a=i[0],l=i[1],c=function(e){l((0,Z.Z)((0,Z.Z)({},a),{},{lookingForAJob:e}))},d=(0,Z.Z)({userId:t.userId,contacts:{github:"",vk:"",facebook:"",instagram:"",twitter:"",website:"",youtube:"",mainLink:""}},a);return(0,C.jsxs)("form",{children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"Full Name"}),": ",(0,C.jsx)(w,{value:a.fullName,onChange:function(e){l((0,Z.Z)((0,Z.Z)({},a),{},{fullName:e.currentTarget.value}))}})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"Looking for a job"}),":",(0,C.jsxs)("label",{children:[(0,C.jsx)("input",{type:"radio",name:"radio",value:"true",checked:a.lookingForAJob,onChange:function(){return c(!0)}})," yes",(0,C.jsx)("input",{type:"radio",name:"radio",value:"false",checked:!a.lookingForAJob,onChange:function(){return c(!1)}})," no"]})]}),a.lookingForAJob&&(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"My professional skills"}),": ",(0,C.jsx)(w,{value:a.lookingForAJobDescription,onChange:function(e){l((0,Z.Z)((0,Z.Z)({},a),{},{lookingForAJobDescription:e.currentTarget.value}))}})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"About me"}),": ",(0,C.jsx)(w,{value:a.aboutMe,onChange:function(e){l((0,Z.Z)((0,Z.Z)({},a),{},{aboutMe:e.currentTarget.value}))}})]}),(0,C.jsx)("div",{}),(0,C.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:[(0,C.jsx)("span",{children:(0,C.jsx)(I.Z,{onClick:function(){o(d,String(t.userId)),n()},nameButton:"save"})}),(0,C.jsx)("span",{style:{marginLeft:"5px"},children:(0,C.jsx)(I.Z,{onClick:function(){return n()},nameButton:"close"})})]})]})},A=o(1335),M=(o(5168),o(5861)),F=o(7757),U=o.n(F),B={uploadPhotoContainer:"UploadPhoto_uploadPhotoContainer__I1+lI",closeTag:"UploadPhoto_closeTag__pfnpE",cropperContainer:"UploadPhoto_cropperContainer__XwKCl",cropper:"UploadPhoto_cropper__19sTC",settings:"UploadPhoto_settings__UgolO",radioButton:"UploadPhoto_radioButton__9bxUv",buttons:"UploadPhoto_buttons__KxXwU",button:"UploadPhoto_button__OU0yZ"},T=function(e){var t=e.onImageSelected,o=(0,r.useRef)();return(0,C.jsxs)("div",{className:B.fileInputContainer,children:[(0,C.jsx)("input",{type:"file",accept:"image/*",ref:o,onChange:function(e){if(e.target.files&&e.target.files.length>0){var o=new FileReader;o.readAsDataURL(e.target.files[0]),o.onload=function(e){t(o.result)}}},style:{display:"none"}}),(0,C.jsx)("button",{className:"btn",onClick:function(){o.current.click()},children:"Choose Image"})]})},E=o(7005),J=function(e){var t=e.image,o=e.onCropDone,n=e.onCropCancel,s=(0,r.useState)({x:0,y:0}),i=(0,u.Z)(s,2),a=i[0],l=i[1],c=(0,r.useState)(1),d=(0,u.Z)(c,2),p=d[0],h=d[1],f=(0,r.useState)(null),m=(0,u.Z)(f,2),v=m[0],x=m[1],j=(0,r.useState)(5/4),_=(0,u.Z)(j,2),g=_[0],k=_[1];return(0,C.jsxs)("div",{className:B.cropperContainer,children:[(0,C.jsx)("div",{className:B.cropper,children:(0,C.jsx)(E.ZP,{image:t,aspect:g,crop:a,zoom:p,onCropChange:l,onZoomChange:function(){window.onwheel=function(e){e.deltaY<0?h(p+.2):h(p-.2)}},onCropComplete:function(e,t){x(t)},style:{containerStyle:{width:"100%",height:"80%",backgroundColor:"#fff"}}})}),(0,C.jsxs)("div",{className:B.settings,children:[(0,C.jsxs)("div",{className:B.radioButton,onChange:function(e){k(e.target.value)},children:[(0,C.jsx)("input",{type:"radio",value:1,name:"ratio"})," 1:1",(0,C.jsx)("input",{type:"radio",value:5/4,name:"ratio"})," 5:4",(0,C.jsx)("input",{type:"radio",value:4/3,name:"ratio"})," 4:3",(0,C.jsx)("input",{type:"radio",value:1.5,name:"ratio"})," 3:2",(0,C.jsx)("input",{type:"radio",value:5/3,name:"ratio"})," 5:3",(0,C.jsx)("input",{type:"radio",value:16/9,name:"ratio"})," 16:9",(0,C.jsx)("input",{type:"radio",value:3,name:"ratio"})," 3:1"]}),(0,C.jsxs)("div",{className:B.buttons,children:[(0,C.jsx)("button",{className:B.button,onClick:n,children:"Cancel"}),(0,C.jsx)("button",{className:B.button,onClick:function(){o(v)},children:"Done"})]})]})]})},L=o(8820),z=function(e){var t=e.savePhoto,o=e.setUploadPhoto,n=(0,r.useState)(""),s=(0,u.Z)(n,2),i=s[0],a=s[1],l=(0,r.useState)("choose-img"),c=(0,u.Z)(l,2),d=c[0],p=c[1],h=(0,r.useState)(""),f=(0,u.Z)(h,2),m=f[0],v=f[1],x=function(){var e=(0,M.Z)(U().mark((function e(n){var s,i,a,r;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,fetch(n);case 3:return s=e.sent,e.next=6,s.blob();case 6:i=e.sent,(a=new Image).src=n,console.log(a),r=new File([i],"image.jpg",{type:i.type}),console.log(r),t(r),o(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,C.jsxs)("div",{className:B.uploadPhotoContainer,children:[(0,C.jsx)("div",{className:B.closeTag,onClick:function(){return o(!1)},children:(0,C.jsx)(L.LHV,{style:{fontSize:"22px"}})}),"choose-img"===d?(0,C.jsx)(T,{onImageSelected:function(e){a(e),p("crop-img")}}):"crop-img"===d?(0,C.jsx)(J,{image:i,onCropDone:function(e){var o=document.createElement("canvas");o.width=e.width,o.height=e.height;var n=o.getContext("2d"),s=new Image;s.src=i,s.onload=function(){n.drawImage(s,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var i=o.toDataURL("image/jpeg");v(i),p("img-cropped"),t(i),x(i)}},onCropCancel:function(){p("choose-img"),a("")}}):(0,C.jsxs)("div",{className:B.bottomBlock,children:[(0,C.jsx)("div",{children:(0,C.jsx)("img",{src:m,className:B.croppedIMG})}),(0,C.jsx)("button",{onClick:function(){p("crop-img")},className:"btn",children:"Crop"}),(0,C.jsx)("button",{onClick:function(){p("choose-img"),a("")},className:"btn",children:"New Image"})]})]})},O="ZoomPhoto_zoomPhotoContainer__3qQ8I",V="ZoomPhoto_closeIcon__m9jVV",H="ZoomPhoto_zoomPhoto__D-1D+",K=function(e){var t=e.setZoomPhoto,o=e.img;return(0,C.jsxs)("div",{className:O,children:[(0,C.jsxs)("div",{className:V,onClick:function(){return t(!1)},children:[" ",(0,C.jsx)(L.LHV,{style:{fontSize:"22px"}})]}),(0,C.jsx)("img",{src:o,alt:"zoom Photo",className:H})]})},R=function(e){var t=e.profile,o=e.isOwner,n=e.goToEditMode;return(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"Full Name"}),": ",t.fullName]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"Looking for a job"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("b",{children:"About me"}),": ",t.aboutMe]}),(0,C.jsx)("div",{}),o&&(0,C.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:11},children:(0,C.jsx)(I.Z,{onClick:function(){return n()},nameButton:"edit"})})]})},G=["profile","isOwner","savePhoto"],Q=function(e){var t=e.profile,o=e.isOwner,n=e.savePhoto,s=(0,c.Z)(e,G),i=(0,r.useState)(!1),a=(0,u.Z)(i,2),l=a[0],b=a[1],N=(0,r.useState)(!1),Z=(0,u.Z)(N,2),I=Z[0],S=Z[1],w=(0,r.useState)(!1),M=(0,u.Z)(w,2),F=M[0],U=M[1],B=null!==(null===t||void 0===t?void 0:t.photos.large)?null===t||void 0===t?void 0:t.photos.large:(0,A.s)(),T=Number(s.authId);return(0,C.jsx)("div",{className:d,children:(0,C.jsxs)("div",{className:p,children:[(0,C.jsx)("div",{className:h,children:(0,C.jsxs)("div",{className:f,children:[(0,C.jsx)("img",{id:"photo",src:B,className:m}),o?(0,C.jsx)("div",{className:v,children:(0,C.jsxs)("div",{className:x,children:[(0,C.jsx)("button",{className:j,onClick:function(){return S(!0)},children:" Upload photo"}),(0,C.jsx)("button",{className:_,onClick:function(){return U(!0)},children:" Zoom photo"})]})}):(0,C.jsx)("div",{className:v,children:(0,C.jsx)("div",{className:x,children:(0,C.jsx)("button",{className:_,onClick:function(){return U(!0)},children:" Zoom photo"})})}),I&&(0,C.jsx)(z,{savePhoto:n,setUploadPhoto:S}),F&&(0,C.jsx)(K,{setZoomPhoto:U,img:B})]})}),(0,C.jsxs)("div",{className:g,children:[(0,C.jsxs)("div",{className:k,children:[(0,C.jsx)("div",{children:"Status:"}),t.userId===T?(0,C.jsx)(y,{status:s.status,updateStatus:s.updateStatus}):(0,C.jsx)("span",{children:s.status})]}),l?(0,C.jsx)("div",{className:P,children:(0,C.jsx)(D,{profile:t,updateProfileData:s.updateProfileData,setEditMode:function(){return b(!1)}})}):(0,C.jsx)("div",{className:P,children:(0,C.jsx)(R,{goToEditMode:function(){return b(!0)},profile:t,isOwner:o})})]})]})})},Y="MyPosts_myPostContainer__3vuVZ",q="MyPosts_addForm__CwT0C",X="MyPosts_messageBlock__4JDWJ",W="MyPosts_item__ydHH-",$="MyPosts_paginationBlock__3AASw",ee="MyPosts_pagination__NnNu+",te="Post_postContainer__jxQ-s",oe="Post_avaBlock__8rQEc",ne="Post_ava__wjWVP",se="Post_textBlock__UkJVG",ie="Post_name__Xr5Bj",ae="Post_message__Qy6Nf",re="Post_like__wVdVD",le=o(6060),ue=function(e){return(0,C.jsxs)("div",{className:te,children:[(0,C.jsx)("div",{className:oe,children:(0,C.jsx)("img",{src:e.img,alt:"avatar",className:ne})}),(0,C.jsxs)("div",{className:se,children:[(0,C.jsx)("div",{className:ie,children:e.name}),(0,C.jsx)("div",{className:ae,children:e.post})]}),(0,C.jsx)("img",{src:le,alt:"likePNG",className:re,onClick:function(){return e.addLike(e.p.id)}}),e.likesCount]})},ce=o(1957),de=r.memo((function(e){for(var t=(0,r.useState)(1),o=(0,u.Z)(t,2),n=o[0],s=o[1],i=e.state.postData,a=e.profile.photos.large,l=Math.ceil(i.length/5),c=[],d=1;d<l+1;d++)c.push(d);var p=function(e){if(1===e)return i.slice(0,5);if(e>1){var t=5*e-5,o=5*e;return i.slice(t,o)}}(n),h=p.map((function(t){return(0,C.jsx)("div",{children:(0,C.jsx)(ue,{img:t.avatar,name:t.name,post:t.message,likesCount:t.likesCount,buttonName:"Like",addLike:e.addLike,p:t,profile:e.profile})},t.id)})),f=c.map((function(e,t){var o=n===e?{color:"rgb(211, 181, 91)"}:{};return(0,C.jsx)("span",{className:ee,style:o,onClick:function(){return s(e)},children:e},t)})),m=a||"https://sun9-55.userapi.com/impf/4OVa92OuK5A2PL1OkHkfDHRK41EaNgTpv860Tw/DVztYSAWFbA.jpg?size=512x512&quality=96&sign=2df645602452340721ae5fcaeffc49ae&type=album";return(0,C.jsxs)("div",{className:Y,children:[(0,C.jsx)("div",{className:q,children:(0,C.jsx)(ce.S,{onSubmit:function(t){e.addPost(t,m)}})}),(0,C.jsx)("div",{className:X,children:(0,C.jsx)("div",{className:W,children:h})}),(0,C.jsx)("div",{className:$,children:f.length>1&&f})]})})),pe=o(8687),he=o(4136),fe=(0,pe.$j)((function(e){return{state:e.profile,profile:e.profile.profile}}),(function(e){return{addPost:function(t,o){e((0,he.Pi)(t,o))},addLike:function(t){e((0,he.dE)(t))}}}))(de),me=o(4667),ve=function(e){return e.profile?(0,C.jsxs)("div",{className:l,children:[(0,C.jsx)(Q,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto,authId:e.authId,updateProfileData:e.updateProfileData}),(0,C.jsx)(fe,{})]}):(0,C.jsx)(me.p,{})},xe=o(9271),je=o(2932),_e=o(7781),ge=function(e){(0,i.Z)(o,e);var t=(0,a.Z)(o);function o(){return(0,n.Z)(this,o),t.apply(this,arguments)}return(0,s.Z)(o,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.setUserProfileThunk(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,o){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,C.jsx)(ve,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,authId:this.props.authId,updateProfileData:this.props.updateProfileDataThunk})}}]),o}(r.Component),ke=(0,_e.qC)((0,pe.$j)((function(e){return{profile:e.profile.profile,status:e.profile.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth,authId:e.auth.id}}),{setUserProfileThunk:he.TE,getStatus:he.lR,updateStatus:he.Nf,savePhoto:he.Ju,updateProfileDataThunk:he.mv}),xe.EN,je.D)(ge)},1957:function(e,t,o){o.d(t,{S:function(){return c}});var n=o(885),s=o(2791),i="AddMessageForm_addMessageFormBlock__6flMP",a="AddMessageForm_textField__D9IqF",r="BigButton_button__G3XYN",l=o(184),u=function(e){var t=e.onClick;return(0,l.jsx)("button",{className:r,onClick:t,children:"AddPost"})},c=function(e){var t=(0,s.useState)(""),o=(0,n.Z)(t,2),r=o[0],c=o[1];return(0,l.jsxs)("div",{className:i,children:[(0,l.jsx)("textarea",{className:a,placeholder:"Enter your message",value:r,onChange:function(e){c(e.currentTarget.value)},onKeyDown:function(t){"Enter"===t.key&&(e.onSubmit(r),c(""))}}),(0,l.jsx)(u,{onClick:function(){""!==r&&(e.onSubmit(r),c(""))}})]})}},2932:function(e,t,o){o.d(t,{D:function(){return d}});var n=o(8683),s=o(5987),i=(o(2791),o(9271)),a=o(8687),r=o(2717),l=o(184),u=["isAuth"],c=function(e){return{isAuth:e.auth.isAuth}};function d(e){return(0,a.$j)(c,{getAuthUserData:r.RK,logout:r.kS})((function(t){var o=t.isAuth,a=(0,s.Z)(t,u);return o?(0,l.jsx)(e,(0,n.Z)({},a)):(0,l.jsx)(i.l_,{to:"/login"})}))}},6060:function(e,t,o){e.exports=o.p+"static/media/like.3bd2642bff63c07e1428.png"}}]);
//# sourceMappingURL=64.155f6726.chunk.js.map